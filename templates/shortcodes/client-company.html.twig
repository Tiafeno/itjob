<style type="text/css">

</style>
<script type="text/javascript">
  (function ($) {
    $(document).ready(function () {
      var table = $('#products-table').DataTable({
        pageLength: 10,
        fixedHeader: false,
        responsive: true,
        "sDom": 'rtip',
        language: {
          url: "https://cdn.datatables.net/plug-ins/1.10.16/i18n/French.json"
        }
      });
      $('#key-search').on('keyup', function () {
        table.search(this.value).draw();
      });
      // $('#type-filter').on('change', function () {
      //   table.column(2).search($(this).val()).draw();
      // });
    });

  })(jQuery);
</script>
<div class="page-header mt-5" ng-app="clientApp">
  <div class="ibox flex-1" ng-controller="clientCompanyCtrl">
    <div class="ibox-body">
      <div class="flexbox">
        <div class="flexbox-b">
          <div>
            <h4>{{ client.title|capitalize }}</h4>
            <div class="text-muted font-13 mb-3">
              <span class="mr-3"><i class="ti-location-pin mr-2"></i>{{ client.address|capitalize }}</span>
              <span><i class="ti-calendar mr-2"></i>{{ client.addDate|capitalize }}</span>
            </div>
            <div>
              <span class="mr-3">
                <span class="badge badge-success badge-circle mr-2 font-14" style="height:30px;width:30px;">
                  <i class="ti-user"></i>
                </span>
                Entreprise
              </span>
            </div>
          </div>
        </div>
        <div class="d-inline-flex">
          <div class="px-4 text-center">
            <div class="text-muted font-13">OFFRE{% if offers|length > 1 %}S{% endif %}</div>
            <div class="h2 mt-2">{{ offers|length }}</div>
          </div>
        </div>
      </div>
    </div>
    <ul class="nav nav-tabs tabs-line m-0 pl-3 pr-3">
      <li class="nav-item">
        <a class="nav-link active" href="#profil" data-toggle="tab">
          Profil
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#offers" data-toggle="tab">
          Mes offres
        </a>
      </li>
    </ul>

    <div class="tab-content" ng-show="!loading">
      <div class="d-block mt-5 mb-5">
        <div class="row">
          <div class="col-md-4 m-auto">
            <div class="text-center">
              <img src="{{ Helper['template_url'] }}/img/loading.gif" width="45" />
              <p>Chargement de contenue ...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-content" ng-show="loading">
      {# Profil utilisateur #}
      <div class="tab-pane fade active show" id="profil">
        <div class="page-content">
          <div class="ibox-body">
            <general-information company="Company"></general-information>
          </div>
        </div>

      </div>
      {# .end Profil utilisateur#}

      {# Les offres #}
      <div class="tab-pane fade text-center" id="offers">
        <div class="page-content">
          <div class="ibox-body">
            <div class="flexbox mb-4">
              <div class="flexbox">
                <div class="input-group-icon input-group-icon-left mr-3">
                  <span class="input-icon input-icon-right font-16"><i class="ti-search"></i></span>
                  <input class="form-control form-control-solid" id="key-search" type="text"
                         placeholder="Rechercher ...">
                </div>
                <a class="btn btn-outline-blue" href="{{ Helper['add_offer_url'] }}">Ajouter une offre</a>
              </div>
            </div>
            <div class="table-responsive row">
              <table class="table table-bordered table-hover" id="products-table">

                <thead class="thead-default thead-lg">
                <tr>
                  <th>ID</th>
                  <th>Poste à promouvoir</th>
                  <th>Type de contrat</th>
                  <th>Secteur d'activité</th>
                  <th>Région</th>
                  <th>Réference</th>
                  <th>Actions</th>
                </tr>
                </thead>

                <tbody>
                {% for offer in offers %}
                  <tr>
                    <td>{{ offer.ID }}</td>
                    <td>
                      <a href="{{ offer.ID|get_permalink }}" title="{{ offer.postPromote }}">{{ offer.postPromote }}</a>
                    </td>
                    <td>{{ offer.contractType[ 'label' ] }}</td>
                    <td>{{ offer.branch_activity.name }}</td>
                    <td>{{ offer.region.name }}</td>
                    <td>
                      <span class="badge badge-info badge-pill">{{ offer.reference }}</span>
                    </td>
                    <td>
                      <span class="text-light mr-3 font-16" style="cursor: pointer">
                        <i class="ti-pencil"></i>
                      </span>
                      {#<span class="text-light font-16" style="cursor: pointer" ng-click="trashOffer({{ offer.ID }})">#}
                        {#<i class="ti-trash"></i>#}
                      {#</span>#}
                    </td>
                  </tr>
                {% endfor %}
                </tbody>

              </table>
            </div>
          </div>
        </div>
      </div>
      {# .end offres#}
    </div>
  </div>
</div>